<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.qsj.ptj.dao.AdvertisementDao" >
  <resultMap id="BaseResultMap" type="cn.qsj.ptj.entity.Advertisement" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 20 10:56:06 CST 2017.
    -->
    <result column="id" property="id" jdbcType="NUMERIC" />
    <result column="company_name" property="companyName" jdbcType="VARCHAR" />
    <result column="company_url" property="companyUrl" jdbcType="VARCHAR" />
    <result column="image_url" property="imageUrl" jdbcType="VARCHAR" />
    <result column="weight" property="weight" jdbcType="NUMERIC" />
    <result column="status" property="status" jdbcType="NUMERIC" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    <result column="note" property="note" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 20 10:56:06 CST 2017.
    -->
    id,company_name,company_url,image_url,weight,status,create_date,note
  </sql>
  
  <delete id="deleteAdvertisement">
  	delete from advertisement where id = #{id,jdbcType=NUMERIC}
  </delete>

  
  <!--根据主键查询服务信息-->
  <select id="findById" resultMap="BaseResultMap" parameterType="java.lang.Integer">
    SELECT
    <include refid="Base_Column_List"/>
    from advertisement
    where id = #{id,jdbcType=NUMERIC}
  </select>
  
  <!--新增服务信息-->
  <insert id="addAdvertisement" parameterType="cn.qsj.ptj.entity.Advertisement">
    INSERT INTO  advertisement
    (
        company_name,
        company_url,
        image_url,
        weight,
        status,
        note,
        create_date
        )
    values(
        #{companyName},
        #{companyUrl},
        #{imageUrl},
        #{weight},
        1,
        #{note},
        now()
    )
  </insert>
 
  <!-- 查询   根据使用状态-->
  <select id="list" resultMap="BaseResultMap">
    select <include refid="Base_Column_List"/>
     FROM  advertisement
    where 1 = 1 
    and status = 1
    ORDER BY create_date DESC
    limit 100
  </select>


 </mapper>